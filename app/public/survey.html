<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey Questions</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

    <h2>About You</h2>
    <p id="fields">(all fields are required)</p>

    <h4>Name</h4>
    <input type="text" name="name" id="name" placeholder="John Doe">

    <h4>Link to Photo</h4>
    <input type="url" name="photo" id="photo" placeholder="https://mypicture.jpg">

    <div class="survey">
        <h5>How often to you check social media?</h5>
        <select name="social" id="q1">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is social media?</option>
        </select>

        <h5>How often do you read books?</h5>
        <select name="books" id="q2">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What are books?</option>
        </select>

        <h5>How often do you watch network or cable TV?</h5>
        <select name="tv" id="q3">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is a TV?</option>
        </select>

        <h5>How often do you use a streaming service for entertainment?</h5>
        <select name="streaming" id="q4">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What does streaming mean?</option>
        </select>

        <h5>How often do you eat at restaurants?</h5>
        <select name="resaturant" id="q5">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is a restaurant?</option>
        </select>

        <h5>How often do you drink alcohol?</h5>
        <select name="alcohol" id="q6">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is alcohol?</option>
        </select>

        <h5>How often do you wash your hair?</h5>
        <select name="hair" id="q7">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is shampoo?</option>
        </select>

        <h5>How often do you cry?</h5>
        <select name="cry" id="q8">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What are tears?</option>
        </select>

        <h5>How often do you go for a walk?</h5>
        <select name="walk" id="q9">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is exercise?</option>
        </select>

        <h5>How often do you eat candy?</h5>
        <select name="candy" id="q10">
            <option value="">Select an option</option>
            <option value="5">Everyday</option>
            <option value="4">Twice a week</option>
            <option value="3">Once a week</option>
            <option value="2">Once a month</option>
            <option value="1">What is candy?</option>
        </select>
    </div>

    <button id="submit" data-toggle="modal" data-target="#results">Submit</button>

    <footer class="footer">
        <p class="api"><a href="/api/friends">API Friends List</a></p>
    </footer>


    <div class="modal fade" id="results" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Your Best Match</h5>
                </div>
                <div class="modal-body">
                    <h3 id="match-name"></h3>
                    <img id="match-photo" src="" alt="New Friend">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary mclose" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        $("#submit").on("click", function (event) {
            event.preventDefault();

            if ($("#name").val() === "" || $("#photo").val() === "" || $("#q1").val() === "" || $("#q2").val() === "" || $("#q3").val() === "" || $("#q4").val() === "" || $("#q5").val() === "" || $("#q6").val() === "" || $("#q7").val() === "" || $("#q8").val() === "" || $("#q9").val() === "" || $("#q10").val() === "") {
                alert("Please answer all of the questions.");
            }

            else {
                var choices = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    answers: [
                        parseInt($("#q1").val()),
                        parseInt($("#q2").val()),
                        parseInt($("#q3").val()),
                        parseInt($("#q4").val()),
                        parseInt($("#q5").val()),
                        parseInt($("#q6").val()),
                        parseInt($("#q7").val()),
                        parseInt($("#q8").val()),
                        parseInt($("#q9").val()),
                        parseInt($("#q10").val()),
                    ]
                }
                console.log(choices);
                $.post("/api/friends", choices, function (data) {
                    console.log(data);
                    $("#match-name").text(data.name);
                    $("#match-photo").attr("src", data.photo);
                });
            }
        });

    </script>

</body>

</html>